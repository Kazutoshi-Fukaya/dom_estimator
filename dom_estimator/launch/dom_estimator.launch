<?xml version="1.0"?>
<launch>
    <arg name="config_path" default="$(find dom_estimator)/config" />
    <arg name="wait_time"   default="0.0" />

    <!-- ros bag -->
    <!-- <include file="$(find dom_estimator)/launch/utils/20220224.launch" /> -->
    <include file="$(find dom_estimator)/launch/utils/20220630.launch" >
        <arg name="is_roomba1" value="true" />
        <arg name="is_roomba2" value="true" />
        <arg name="is_roomba3" value="true" />
        <arg name="is_roomba4" value="true" />
        <arg name="is_roomba5" value="true" />
        <arg name="is_roomba6" value="true" />
        <arg name="wait_time"  value="$(arg wait_time)" />S
    </include>

    <!-- map server (for visualizing) -->
    <arg name="is_map" default="true" />
    <group if="$(arg is_map)" >
        <include file="$(find dom_estimator)/launch/utils/map_server.launch" />
    </group>

    <!-- image_connector (for visualizing) -->
    <include file="$(find dom_estimator)/launch/utils/image_connector.launch" />

    <!-- dom_estimator -->
    <node pkg="dom_estimator" type="dom_estimator_node" name="dom_estimator_node" output="screen" >
        <!-- params -->
        <param name="IS_DEBUG"        value="true" />
        <param name="OBJECTS_FILE"    value="$(arg config_path)/init_objects/20220224.csv" />
        <param name="UPDATE_INTERVAL" value="150.0" />

        <param name="IS_RECORD"       value="true" />
        <param name="RECORD_PATH"     value="$(find dom_estimator)/record/" />

        <!-- rosparams -->
        <rosparam command="load" file="$(arg config_path)/params/object_params.yaml" />
        <rosparam command="load" file="$(arg config_path)/params/robot_element.yaml" />
    </node>

    <!-- rviz -->
    <arg name="is_rviz" default="true" />
    <group if="$(arg is_rviz)" >
        <node pkg="rviz" type="rviz" name="rviz" args="-d $(arg config_path)/rviz/dom_estimator.rviz" />
    </group>

</launch>
